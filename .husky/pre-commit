#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Check commit message for AI-related keywords
commit_msg_file="$1"
commit_msg=$(cat "$commit_msg_file")

# List of AI-related keywords to reject
ai_keywords=("ChatGPT" "Copilot" "GPT-4" "Gemini" "Claude" "AI assisted" "Generated by")

for keyword in "${ai_keywords[@]}"; do
  if echo "$commit_msg" | grep -i "$keyword" > /dev/null; then
    echo "❌ COMMIT REJECTED: Commit message contains '$keyword'"
    echo ""
    echo "This training repository encourages coding without AI assistance."
    echo "Please write your own commit message and try again."
    echo ""
    echo "Rationale: Learning to optimize code requires understanding the problems"
    echo "yourself, not relying on AI to identify or fix them."
    exit 1
  fi
done

echo "✅ Commit message approved - no AI keywords detected"
exit 0